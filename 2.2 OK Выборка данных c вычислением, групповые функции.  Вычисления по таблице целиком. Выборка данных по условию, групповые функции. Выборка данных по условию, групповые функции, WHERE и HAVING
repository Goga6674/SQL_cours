1. Выборка данных c вычислением, групповые функции. 
2. Вычисления по таблице целиком.
3. Выборка данных по условию, групповые функции. 
4. Выборка данных по условию, групповые функции, WHERE и HAVING


        1. Выборка данных c вычислением, групповые функции. 

В качестве аргумента групповых функций  SQL может использоваться не только столбец, но и любое допустимое в SQL арифметическое выражение.

Пример
Вывести суммарную стоимость книг каждого автора.

Запрос:
        SELECT author, SUM(price * amount) AS Стоимость
        FROM book
        GROUP BY author;

Результат:
+------------------+-----------+
| author           | Стоимость |
+------------------+-----------+
| Булгаков М.А.    | 4715.47   |
| Достоевский Ф.М. | 11802.03  |
| Есенин С.А.      | 9750.00   |
+------------------+-----------+
Групповые функции могут быть элементами выражений. Например, при вычислении средней стоимости книг каждого автора на предыдущем шаге получились значения с шестью знаками после запятой.
А поскольку это деньги, значения нужно округлить до 2 знаков после запятой.

Пример
Найти среднюю цену книг каждого автора.

Запрос:
        SELECT author, ROUND(AVG(price),2) AS Средняя_цена
        FROM book
        GROUP BY author;

Результат:
+------------------+--------------+
| author           | Средняя_цена |
+------------------+--------------+
| Булгаков М.А.    | 605.75       |
| Достоевский Ф.М. | 579.84       |
| Есенин С.А.      | 650.00       |
+------------------+--------------+

#######################################################################################


            2. Вычисления по таблице целиком.

Групповые функции позволяют вычислять итоговые значения по всей таблице. Например, можно посчитать общее количество книг на складе, вычислить суммарную стоимость и пр.
Для этого после ключевого слова SELECT указывается групповая функция для выражения или имени столбца, а ключевые слова GROUP BY опускаются.

Пример
Посчитать количество экземпляров книг на складе.

Запрос:
        SELECT SUM(amount) AS Количество
        FROM book;

Результат:
+------------+
| Количество |
+------------+
| 46         |
+------------+ 
Результатом таких запросов является единственная строка с вычисленными по таблице значениями.


Пример
Посчитать общее количество экземпляров книг на складе и их стоимость .

Запрос:
        SELECT SUM(amount) AS Количество, 
        SUM(price * amount) AS Стоимость
        FROM book;
        
Результат:
+------------+-----------+
| Количество | Стоимость |
+------------+-----------+
| 46         | 26267.50  |
+------------+-----------+
#######################################################################################

